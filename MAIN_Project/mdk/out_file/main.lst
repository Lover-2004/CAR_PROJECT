C251 COMPILER V5.60.0,  main                                                               16/01/25  23:25:19  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\out_file\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C251\BIN\C251.EXE ..\user\main.c LARGE NOALIAS FLOAT64 WARNINGLEVEL(3) OPTIMIZE(SIZE) BR
                    -OWSE INCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_driver;
                    -..\user;..\code) DEBUG PRINT(.\out_file\main.lst) OBJECT(.\out_file\main.obj) 

stmt  level    source

    1          /********************************************************************************************************
             -*************
    2          * AI8051U Opensourec Library AI8051U Դ⣩һڹٷ SDK ӿڵĵԴ
    3          * Copyright (c) 2022 SEEKFREE ɿƼ
    4          *
    5          * ļSTC Դһ
    6          *
    7          * AI8051U Դ 
    8          * Ըᷢ GPLGNU General Public License GNUͨù֤
    9          *  GPL ĵ3棨 GPL3.0ѡģκκİ汾·/޸
   10          *
   11          * Դķϣܷãδκεı֤
   12          * ûԻʺض;ı֤
   13          * ϸμ GPL
   14          *
   15          * ӦյԴͬʱյһ GPL ĸ
   16          * ûУ<https://www.gnu.org/licenses/>
   17          *
   18          * ע
   19          * Դʹ GPL3.0 Դ֤Э Ϊİ汾
   20          * Ӣİ libraries/doc ļµ GPL3_permission_statement.txt ļ
   21          * ֤ libraries ļ ļµ LICENSE ļ
   22          * ӭλʹò ޸ʱ뱣ɿƼİȨ
   23          *
   24          * ļ          
   25          * ˾          ɶɿƼ޹˾
   26          * 汾Ϣ          鿴 libraries/doc ļ version ļ 汾˵
   27          *           MDK FOR C251
   28          * ƽ̨          AI8051U
   29          *           https://seekfree.taobao.com/
   30          *
   31          * ޸ļ¼
   32          *                          ע
   33          * 2024-08-01        W            first version
   34          *********************************************************************************************************
             -***********/
   35          
   36          #include "zf_common_headfile.h"
   37          #include "sys.h"
   38          
   39          // STCˢ֧3S﮵أ밴չ涨ʹõ
   40          // STCˢ֧3S﮵أ밴չ涨ʹõ
   41          // STCˢ֧3S﮵أ밴չ涨ʹõ
   42          
   43          // *************************** Ӳ˵ ***************************
   44          //      ģܽ            Ƭܽ
   45          //      PWM_1                   P02
   46          //      PWM_2                   P26
   47          //      GND                     GND
   48          //
   49          //      ߶ +          
   50          //      ߶ -          ظ
   51          //
   52          // ʹ ѧϰ в
   53          //      ģĵԴ߶
   54          //      ģźŽӿʹ׻źŽӿ ע߷ ȷñȷһ
             - ŲοϷİ
C251 COMPILER V5.60.0,  main                                                               16/01/25  23:25:19  PAGE 2   

   55          //      빩ȷ
   56          
   57          // *************************** ̲˵ ***************************
   58          // 1.İ¼ɱ ع
   59          //
   60          // 2.STCˢԿ ˢƷת
   61          //
   62          // 3.ûнӵ ʹñϲѹ仯
   63          //
   64          // ˵ز ձļ· ̳˵ Ų
   65          
   66          // ****************************  ****************************
   67          #define FREQ               (50)                                                // ƵΪ50HZ֧
             -300HZ
   68          #define PWM_1              (PWMA_CH2P_P12)
   69          #define PWM_2              (PWMA_CH4P_P26)
   70          
   71          uint16 duty = 0;
   72          void main()
   73          {
   74   1          clock_init(SYSTEM_CLOCK_40M);
   75   1              debug_init();
   76   1      
   77   1         
   78   1          // ˴дû ʼ
   79   1          pwm_init(PWM_1, FREQ, 0);                                                   // PWM ͨ1 ʼƵ 5
             -0Hz  ռձȳʼΪ 0
   80   1          pwm_init(PWM_2, FREQ, 0);                                                   // PWM ͨ2 ʼƵ 5
             -0Hz  ռձȳʼΪ 0
   81   1          rocker_init();  
   82   1                      icm20602_init();
   83   1      //              imu660ra_init();
   84   1              
   85   1                      // жϻص
   86   1      //              tim0_irq_handler = pit_hanlder;
   87   1      //    pit_ms_init(PIT, 5);
   88   1              
   89   1              // ˴дû ʼ
   90   1      
   91   1          // ǿߵƽʱ䣬Χ 1ms-2ms
   92   1          // 1ms Ϊ 0%
   93   1          // 2ms Ϊ 100%
   94   1      
   95   1          duty = 1.0 / 20 * 10000;        // (1ms/20ms * 10000)10000PWMռձʱֵ 10000ΪPWM
             -
   96   1      
   97   1          while(1)
   98   1          {
   99   2                              
  100   2      //                      rocker_read();
  101   2      //                      printf("rx:%.2f,ry:%.2f,state:%d\n",R_x_val,R_y_val,Rocker_state);
  102   2                              icm20602_get_acc();                                                         // ȡICM20602ļٶȲ
             -ֵ
  103   2          icm20602_get_gyro();                                                         // ȡ IMU660RA Ľٶ
             -Ȳֵ
  104   2                      printf("\r\nICM20602 acc data:  x=%5d, y=%5d, z=%5d\r\n", icm20602_acc_x, icm20602_acc_y, icm20602_acc_
             -z);
  105   2          printf("\r\nICM20602 gyro data: x=%5d, y=%5d, z=%5d\r\n", icm20602_gyro_x, icm20602_gyro_y, icm20602_
             -gyro_z);
  106   2          system_delay_ms(500);
  107   2                      // ˴дҪѭִеĴ
  108   2      
  109   2              // ˢת   1ms - 2ms/20ms * 1000010000PWMռձʱֵ
  110   2              // 50HzĿƵ£ˢת 0%   Ϊ 500
  111   2              // 50HzĿƵ£ˢת 20%  Ϊ 600
  112   2              // 50HzĿƵ£ˢת 40%  Ϊ 700
C251 COMPILER V5.60.0,  main                                                               16/01/25  23:25:19  PAGE 3   

  113   2              // 50HzĿƵ£ˢת 60%  Ϊ 800
  114   2              // 50HzĿƵ£ˢת 80%  Ϊ 900
  115   2              // 50HzĿƵ£ˢת 100% Ϊ 1000
  116   2                      
  117   2                      // ֧50hz-300hzĿƵ
  118   2                      // 50HzĿƵ 0%100%ռձΪ5001000
  119   2                      // 100HzĿƵʣ0%100%ռձΪ10002000
  120   2                      // 200HzĿƵʣ0%100%ռձΪ20004000
  121   2                      // 300HzĿƵʣ0%100%ռձΪ30006000
  122   2                      // ˴˶λʣһٴνͼλ
  123   2                      
  124   2              // ޸dutyֵ޸ˢת
  125   2      
  126   2              
  127   2              // ˴дҪѭִеĴ
  128   2          }
  129   1      }
  130          // ****************************  ****************************
  131          
  132          // *************************** ̳˵ ***************************
  133          // ʱ밴б
  134          //
  135          // 1תģѹޱ仯
  136          //      ʹԣҪõع
  137          //      ģǷȷӹ ʹõԴ߹ ʹöŰ
  138          //      鿴Ƿ¼Ƿرȷ¸λ
  139          //      ñӦ PWM ŵѹǷ仯仯֤δУ𻵣߽Ӵ ϵ
             -ͷ
  140          
  141          
  142          
  143          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       185     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =         2     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =        95     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
